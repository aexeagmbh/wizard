<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../drf-crud/drf-crud.html">
<!--<link rel="import" href="../../bower_components/baasic-crud/baasic-crud.html">-->
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/paper-dialog/paper-action-dialog.html">

<polymer-element name="model-training" attributes="training storageId">
    <template>

        <base-model id="trainingModel" storageId="{{storageId}}" data="{{training}}"></base-model>
        
        <div class="training">
            <h2>{{trainingData.name}}</h2>
        <div horizontal layout center>
            <paper-input-decorator label="Name" floatingLabel="{{true}}">
                <input value="{{trainingData.name}}" is="ax-core-input-inline" on-ax-core-input-inline-cancel="{{cancelEditAction}}" on-ax-core-input-inline-commit="{{updateAPI}}" autofocus>
            </paper-input-decorator>
            <paper-icon-button icon="delete" on-click="{{confirmDeleteAction}}"></paper-icon-button>
            <paper-action-dialog id="confirmDialog" heading="Delete training?">
                <p>Do you really want to delete the training "{{trainingData.name}}"?</p>
                <paper-button dismissive>Cancel</paper-button>
                <paper-button affirmative on-click="{{deleteAction}}">Confirm</paper-button>
            </paper-action-dialog>
        </div>
        </div>
    </template>
    <script>
        (function () {
            Polymer('model-training', {

                model: null,
                ready: function () {
                    this.model = this.$.trainingModel;
                    this.model.refresh();
                },
                computed: {
                    trainingData: 'model.data'
                },

                updateAPI: function() {
                    this.model.save();
                },

                confirmDeleteAction: function() {
                    this.$.confirmDialog.open();
                },
                deleteAction: function() {
                    this.model.delete();
                }
            });
        })();
    </script>
</polymer-element>
